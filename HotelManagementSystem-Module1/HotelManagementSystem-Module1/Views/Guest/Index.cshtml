@{
    ViewData["Title"] = "Guest page";
    Boolean isCreate = ViewBag.create;
}
<div class="text-center">
    <div class="container">
        <div class="row">
            <div class="col-10">
                <h4 class="display-4">Guest List</h4>
            </div>
            <div class="col-2">
                <input class="btn btn-primary" type="button" title="Create" value="Create" onclick="location.href='@Url.Action("CreateGuest", "Guest", new {isReserveFlow = true},null)'" />
            </div>
        </div>
    </div>
</div>
<div class="text-nowrap">
    @{
        <table id="guesttb" class="table table-striped table-hover table-bordered" cellspacing="0" width="100%">
            <thead class="thead-dark">
                <tr>
                    <th class="">GuestId</th>
                    <th class="">First Name</th>
                    <th class="">Last Name</th>
                    <th class="">Guest Type</th>
                    <th class=""> </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var g in Model)
                {
                    <tr>
                        <td scope="row" style="width: 20%;">@g.GuestIdDetails()</td>
                        <td style="width: 20%;">@g.FirstNameDetails()</td>
                        <td style="width: 20%;">@g.LastNameDetails()</td>
                        <td style="width: 20%;">@g.GuestTypeDetails()</td>
                        <td style="width: 20%;">
                            @if (isCreate)
                            {
                                <input class="btn btn-secondary" type="button" title="Select" value="Select" onclick="location.href='@Url.Action("CreateReservation", "ReservationCreation", new {GuestId = @g.GuestIdDetails()},null)'" />
                            }
                            else
                            {
                                <input class="btn btn-secondary" type="button" title="Update" value="Update" onclick="location.href='@Url.Action("UpdateGuest", "Guest", new {guestID = g.GuestIdDetails()},null)'" />
                                <input class="btn btn-outline-secondary" type="button" title="Delete" value="Delete" onclick="location.href='@Url.Action("DeleteGuest", "Guest",new { guestID = g.GuestIdDetails(), },null)'" />
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
@{
    string createResult = null;
    if (TempData["CreateGuestMessage"] != null)
    {
        createResult = TempData["CreateGuestMessage"].ToString();
        if (createResult == "Success")
        {
            <div class="alert alert-success" role="alert">
                Successfully Created Guest
            </div>
        }
        else
        {
            <div class="alert alert-danger" role="alert">
                Error Occured When Creating Guest
            </div>
        }
    }
}
@section Scripts {
    @{await Html.RenderPartialAsync("_DatatableScriptsPartial");
        <script type="text/javascript">
            $(document).ready(function () {
                $('#guesttb').DataTable({
                    "scrollX": true,
                    "scrollY": "70vh",
                    "scrollCollapse": true
                });
                $('.dataTables_length').addClass('bs-select');
            });
        </script>
     }
}