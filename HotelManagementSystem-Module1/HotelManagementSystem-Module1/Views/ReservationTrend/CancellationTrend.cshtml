@using HotelManagementSystem_Module1.Domain.Models
@using System.Collections
@using System.Net
@using System.Web

@{
    ViewData["Title"] = "Reservation Analytic";
    ArrayList testList = ViewBag.testList;
    String[] XAxisMonthYearArr = ViewBag.XAxisMonthYearArr as String[];

}

<!--Graph Scripts from Highcharts-->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<div class="container">
    <h1>@ViewData["Title"]</h1>
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#cancel">Cancellation Trend</a></li>
        <li><a data-toggle="tab" href="#checkin">Check-In Trend</a></li>
    </ul>

    <div class="tab-content">
        <div id="cancel" class="tab-pane fade in active">
            <!--<h3>Cancellation Trend</h3>-->

            <div id="canceltrend" style="min-width: 300px; height: 400px; margin: 0 auto">


            </div>

        </div>
        <div id="checkin" class="tab-pane fade">
            <!--<h3>Check-In Trend</h3>-->
            <figure class="highcharts-figure">
                <div id="checkintrend"></div>

            </figure>
        </div>

    </div>
</div>

<!--Graph for Cancellation-->
<script>
    var array = [];
    @for (int i = 0; i < 12; i++)
{
    <text>array.push("@XAxisMonthYearArr[i]");</text>
}
    //var xAxisArray = JSON.stringify(array);

    //var test = { categories: array };

    Highcharts.chart('canceltrend', {
        chart: {
            type: 'line'
        },
        title: {
            text: 'Total number of Cancellation per month'
        },

        xAxis: {
            categories: array
        },
        yAxis: {
            title: {
                text: 'Number of Cancellation'
            }
        },
        plotOptions: {
            line: {
                dataLabels: {
                    enabled: true
                },
                enableMouseTracking: false
            }
        },
        series: [{
            name: array[0] + " To " + array[11],
            data: [0, 0, 0, 4, 1, 1, 2, 3, 3, 1, 3, 2]
        }]
    });


</script>

<!--Graph for Check In trend-->
<script>
    Highcharts.chart('checkintrend', {

        title: {
            text: 'Highest Volume per day'
        },

        yAxis: {
            title: {
                text: 'Number of Visitors'
            }
        },

        xAxis: {
            accessibility: {

                rangeDescription: 'Range: 2010 to 2017'
            }
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                pointStart: 2010
            }
        },

        series: [{
            name: 'Installation',
            data: [43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]
        }, {
            name: 'Manufacturing',
            data: [24916, 24064, 29742, 29851, 32490, 30282, 38121, 40434]
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        }

    });
</script>